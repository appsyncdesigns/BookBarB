"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[289],{7289:(Y,c,l)=>{l.r(c),l.d(c,{ComplaintsModule:()=>k});var p=l(6895),d=l(9455),f=l(5439),Z=l(5226),x=l.n(Z),t=l(4650),C=l(5830),v=l(7241),h=l(388),u=l(4006),g=l(8423),_=l(502),m=l(4333);const T=["myModal"];function y(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.util.translate("No Data Found.."))}}function U(n,s){if(1&n&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.util.translate("ID")),t.xp6(2),t.hij("",e.util.translate("Order Id")," "),t.xp6(2),t.hij("",e.util.translate("User")," "),t.xp6(2),t.Oqu(e.util.translate("Issue With")),t.xp6(2),t.Oqu(e.util.translate("Detail")),t.xp6(2),t.Oqu(e.util.translate("Title")),t.xp6(2),t.Oqu(e.util.translate("Status")),t.xp6(2),t.Oqu(e.util.translate("Action"))}}function A(n,s){1&n&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",30),t.qZA())}const q=function(){return[1,2,3,4,5,6,7,8]};function I(n,s){1&n&&(t.TgZ(0,"tr"),t.YNc(1,A,2,0,"td",10),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,q)))}function b(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"span",23),t._uU(4),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("On Order From"),""),t.xp6(3),t.Oqu(e.storeInfo.name)}}function O(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"span",23),t._uU(4),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("On Freelancer")," "),t.xp6(3),t.Oqu(e.storeInfo.name)}}function M(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"span",23),t._uU(4),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("On Driver")," "),t.xp6(3),t.Oqu(e.driverInfo.first_name+" "+e.driverInfo.last_name)}}function w(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"span",23),t._uU(3),t.qZA(),t._uU(4),t._UZ(5,"br"),t.TgZ(6,"span",23),t._uU(7),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("On Product")," "),t.xp6(2),t.Oqu(e.productInfo.name),t.xp6(1),t.hij(" ",i.util.translate("From")," "),t.xp6(3),t.hij(" ",e.storeInfo.name," ")}}function j(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"span",23),t._uU(3),t.qZA(),t._uU(4),t._UZ(5,"br"),t.TgZ(6,"span",23),t._uU(7),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",i.util.translate("On Service")," "),t.xp6(2),t.Oqu(e.productInfo.name),t.xp6(1),t.hij(" ",i.util.translate("From")," "),t.xp6(3),t.hij(" ",e.storeInfo.name," ")}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"img",31),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,b,5,2,"div",9),t.YNc(12,O,5,2,"div",9),t.YNc(13,M,5,2,"div",9),t.YNc(14,w,8,4,"div",9),t.YNc(15,j,8,4,"div",9),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td")(19,"c-badge",32),t.NdJ("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.statusUpdate(o))}),t._uU(20),t.qZA()(),t.TgZ(21,"td")(22,"c-badge",33),t.NdJ("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openItem(o))}),t._uU(23),t.qZA()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.order_id),t.xp6(2),t.Q6J("src",i.api.imageUrl+e.userInfo.cover,t.LSH),t.xp6(1),t.hij(" ",e.userInfo.first_name+" "+e.userInfo.last_name," "),t.xp6(2),t.Oqu(i.issue_With[e.issue_with]),t.xp6(2),t.Q6J("ngIf",1==e.issue_with&&e.storeInfo&&e.storeInfo.name),t.xp6(1),t.Q6J("ngIf",2==e.issue_with&&e.storeInfo&&e.storeInfo.name),t.xp6(1),t.Q6J("ngIf",3==e.issue_with&&e.driverInfo&&e.driverInfo.first_name),t.xp6(1),t.Q6J("ngIf",4==e.issue_with&&e.productInfo&&e.productInfo.name&&e.storeInfo&&e.storeInfo.name),t.xp6(1),t.Q6J("ngIf",6==e.issue_with&&e.productInfo&&e.productInfo.name&&e.storeInfo&&e.storeInfo.name),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Tol(1==e.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==e.status?"success":"dark"),t.xp6(1),t.hij(" ",i.util.translate(1==e.status?"Active":"Resolved")," "),t.xp6(3),t.hij(" ",i.util.translate("View / Reply")," ")}}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",34),t.NdJ("pageChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.page=a)}),t.qZA()()}}const N=function(n){return{id:"pagin1",itemsPerPage:10,currentPage:n}},Q=[{path:"",component:(()=>{class n{constructor(e,i){this.api=e,this.util=i,this.dummy=[],this.list=[],this.dummyList=[],this.page=1,this.name="",this.email="",this.message="",this.reply="",this.id="",this.issue_With=["",this.util.translate("Order"),this.util.translate("Freelancer"),this.util.translate("Driver"),this.util.translate("Product"),this.util.translate("Service"),this.util.translate("Packages")],this.resetChanges=()=>{this.list=this.dummyList},this.getForms()}ngOnInit(){}getForms(){this.list=[],this.dummy=Array(5),this.api.get_private("v1/complaints/getAll").then(e=>{console.log(e),this.dummy=[],e&&e.status&&200==e.status&&e.data&&e.data.length&&(this.list=e.data,this.dummyList=e.data)},e=>{console.log(e),this.dummy=[],this.util.apiErrorHandler(e)}).catch(e=>{console.log(e),this.dummy=[],this.util.apiErrorHandler(e)})}search(e){this.resetChanges(),console.log("string",e),this.list=this.filterItems(e)}filterItems(e){return this.list.filter(i=>i.name.toLowerCase().indexOf(e.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}getDate(e){return f(e).format("ll")}openItem(e){console.log(e),this.name=e.userInfo.first_name+" "+e.userInfo.last_name,this.email=e.userInfo.email,this.message=e.short_message,this.id=e.id,this.myModal.show()}sendMail(){if(""==this.reply||!this.reply)return this.util.error(this.util.translate("Please add your reply text")),!1;const e={id:this.id,mediaURL:this.api.imageUrl,subject:this.util.appName+" "+this.util.translate("Replied on your complaints"),thank_you_text:this.util.translate("You have received new mail on your complaints"),header_text:this.util.appName+" "+this.util.translate("Replied on your complaints"),email:this.email,from_username:this.name,to_respond:this.reply};this.util.show(),console.log(e),this.api.post_private("v1/complaints/replyContactForm",e).then(i=>{console.log(i),this.util.hide(),this.reply="",this.myModal.hide(),this.util.success(this.util.translate("Mail sent"))},i=>{console.log(i),this.util.hide(),this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.util.hide(),this.util.apiErrorHandler(i)})}statusUpdate(e){x().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(i=>{if(i&&i.value){console.log("update it");const a={id:e.id,status:0==e.status?1:0};console.log("======",a),this.util.show(),this.api.post_private("v1/complaints/update",a).then(o=>{this.util.hide(),console.log("+++++++++++++++",o),o&&o.status&&200==o.status&&o.success&&(this.util.success(this.util.translate("Status Updated !")),this.getForms())},o=>{this.util.hide(),console.log("Error",o),this.util.apiErrorHandler(o)}).catch(o=>{this.util.hide(),console.log("Err",o),this.util.apiErrorHandler(o)})}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.s),t.Y36(v.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaints"]],viewQuery:function(e,i){if(1&e&&t.Gf(T,5),2&e){let a;t.iGM(a=t.CRH())&&(i.myModal=a.first)}},decls:55,vars:24,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["style","text-align: center;",4,"ngIf"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-12"],["for","disabled-input",1,"col-form-label"],[2,"font-weight","bold"],["for","text-input",1,"col-form-label"],["type","text","rows","10","id","text-input","name","text-input",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[2,"text-align","center"],["count","1","appearance","line"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","25px","width","25px","object-fit","cover",3,"src"],[3,"color","click"],["color","info",1,"me-1","badge","bg-info",3,"click"],["id","pagin1",3,"pageChange"]],template:function(e,i){if(1&e){const a=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,y,3,1,"div",7),t.TgZ(9,"table",8),t.YNc(10,U,18,8,"thead",9),t.TgZ(11,"tbody"),t.YNc(12,I,2,2,"tr",10),t.YNc(13,J,24,16,"tr",10),t.ALo(14,"paginate"),t.qZA()(),t.YNc(15,F,2,0,"div",9),t.qZA()()()()(),t.TgZ(16,"div",11,12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h5",16),t._uU(22),t.qZA(),t.TgZ(23,"button",17),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(17);return t.KtG(r.hide())}),t.TgZ(24,"span",18),t._uU(25,"\xd7"),t.qZA()()(),t.TgZ(26,"div",19)(27,"div",20)(28,"div",21)(29,"label",22),t._uU(30),t.qZA(),t.TgZ(31,"label",23),t._uU(32),t.qZA()()(),t.TgZ(33,"div",20)(34,"div",21)(35,"label",22),t._uU(36),t.qZA(),t.TgZ(37,"label",23),t._uU(38),t.qZA()()(),t.TgZ(39,"div",20)(40,"div",21)(41,"label",22),t._uU(42),t.qZA(),t.TgZ(43,"label",23),t._uU(44),t.qZA()()(),t.TgZ(45,"div",20)(46,"div",21)(47,"label",24),t._uU(48),t.qZA(),t.TgZ(49,"textarea",25),t.NdJ("ngModelChange",function(r){return i.reply=r}),t.qZA()()()(),t.TgZ(50,"div",26)(51,"button",27),t.NdJ("click",function(){t.CHM(a);const r=t.MAs(17);return t.KtG(r.hide())}),t._uU(52),t.qZA(),t.TgZ(53,"button",28),t.NdJ("click",function(){return i.sendMail()}),t._uU(54),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",i.util.translate("All Complaints Forms")," "),t.xp6(2),t.Q6J("ngIf",!(null!=i.list&&i.list.length)&&0==i.dummy.length),t.xp6(2),t.Q6J("ngIf",null==i.list?null:i.list.length),t.xp6(2),t.Q6J("ngForOf",i.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(14,19,i.list,t.VKq(22,N,i.page))),t.xp6(2),t.Q6J("ngIf",(null==i.list?null:i.list.length)>0),t.xp6(7),t.AsE("",i.util.translate("Reply to")," ",i.name," "),t.xp6(8),t.hij("",i.util.translate("Name")," : "),t.xp6(2),t.hij(" ",i.name," "),t.xp6(4),t.hij("",i.util.translate("Email")," : "),t.xp6(2),t.hij(" ",i.email," "),t.xp6(4),t.hij("",i.util.translate("Message")," : "),t.xp6(2),t.hij(" ",i.message," "),t.xp6(4),t.hij("",i.util.translate("Reply")," "),t.xp6(1),t.Q6J("placeholder",i.util.translate("Reply"))("ngModel",i.reply),t.xp6(3),t.Oqu(i.util.translate("Close")),t.xp6(2),t.Oqu(i.util.translate("Reply")))},dependencies:[p.sg,p.O5,h.oB,u.Fj,u.JJ,u.On,g.Ro,_.xr,m.LS,m._s],styles:['@charset "UTF-8";']}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,R,h.zk.forRoot(),u.u5,g.ef,_.hx.forRoot({animation:"progress-dark"}),m.JX]}),n})()}}]);