"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[663],{5663:(G,_,r)=>{r.r(_),r.d(_,{ProductsStatsModule:()=>B});var m=r(6895),f=r(9455),A=r(5861),u=r(5439),t=r(4650),T=r(7241),v=r(5830),h=r(6186),x=r(8423),p=r(4006);function C(n,i){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function U(n,i){if(1&n&&(t.TgZ(0,"button",20),t._UZ(1,"i",21),t._uU(2),t.qZA()),2&n){const e=t.oxw();t.Q6J("useExistingCss",!0)("printTitle",e.storename),t.xp6(2),t.hij("",e.util.translate("Print")," ")}}function q(n,i){if(1&n&&(t.TgZ(0,"h2",22),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("No Product Found")," ")}}function y(n,i){if(1&n&&(t.TgZ(0,"p")(1,"span",41),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",e.name," ")}}function S(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",o.util.currecny," ",e.total," ")}}function Y(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",e.total," ",o.util.currecny,"")}}function P(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",o.util.currecny," ",e.discount," ")}}function F(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",e.discount," ",o.util.currecny,"")}}function I(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",o.util.currecny," ",e.grand_total," ")}}function J(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",e.grand_total," ",o.util.currecny,"")}}function M(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",o.util.currecny," ",o.getCommisions(e.total)," ")}}function w(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE("",o.getCommisions(e.total)," ",o.util.currecny,"")}}function N(n,i){if(1&n&&(t.TgZ(0,"tr",39)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,y,4,1,"p",40),t.qZA(),t.TgZ(7,"td"),t.YNc(8,S,2,2,"span",38),t.YNc(9,Y,2,2,"span",38),t.qZA(),t.TgZ(10,"td"),t.YNc(11,P,2,2,"span",38),t.YNc(12,F,2,2,"span",38),t.qZA(),t.TgZ(13,"td"),t.YNc(14,I,2,2,"span",38),t.YNc(15,J,2,2,"span",38),t.qZA(),t.TgZ(16,"td"),t.YNc(17,M,2,2,"span",38),t.YNc(18,w,2,2,"span",38),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(2),t.hij("##",e.id,""),t.xp6(2),t.Oqu(e.date_time),t.xp6(2),t.Q6J("ngForOf",e.orders),t.xp6(2),t.Q6J("ngIf","left"==o.util.cside),t.xp6(1),t.Q6J("ngIf","right"==o.util.cside),t.xp6(2),t.Q6J("ngIf","left"==o.util.cside),t.xp6(1),t.Q6J("ngIf","right"==o.util.cside),t.xp6(2),t.Q6J("ngIf","left"==o.util.cside),t.xp6(1),t.Q6J("ngIf","right"==o.util.cside),t.xp6(2),t.Q6J("ngIf","left"==o.util.cside),t.xp6(1),t.Q6J("ngIf","right"==o.util.cside)}}function E(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.util.currecny," ",e.totalAmount," ")}}function j(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.totalAmount," ",e.util.currecny,"")}}function Q(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.util.currecny," ",e.commisionAmount," ")}}function D(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.commisionAmount," ",e.util.currecny,"")}}function b(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.util.currecny," ",e.toPay," ")}}function O(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.toPay," ",e.util.currecny,"")}}function $(n,i){if(1&n&&(t.TgZ(0,"div",23)(1,"div",3)(2,"div",4)(3,"div",24)(4,"h3",25),t._uU(5),t.qZA(),t.TgZ(6,"p",26),t._uU(7),t.qZA(),t.TgZ(8,"p",27),t._uU(9),t.qZA(),t.TgZ(10,"p",28),t._uU(11),t._UZ(12,"br"),t._uU(13),t._UZ(14,"br"),t._uU(15),t.qZA(),t.TgZ(16,"p",28),t._uU(17),t.qZA(),t.TgZ(18,"p",28),t._uU(19),t.qZA(),t.TgZ(20,"p",29),t._uU(21),t.qZA(),t.TgZ(22,"p",30),t._uU(23),t.qZA(),t.TgZ(24,"table",31)(25,"thead")(26,"tr",32)(27,"th"),t._uU(28),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.qZA(),t.TgZ(37,"th"),t._uU(38),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,N,19,11,"tr",33),t.qZA()(),t.TgZ(43,"div",34),t._UZ(44,"div",13),t.TgZ(45,"div",35)(46,"p",27),t._uU(47),t.qZA(),t.TgZ(48,"p",27),t._uU(49),t.qZA(),t.TgZ(50,"p",27),t._uU(51),t.qZA()(),t.TgZ(52,"div",36)(53,"p",37),t.YNc(54,E,2,2,"span",38),t.YNc(55,j,2,2,"span",38),t.qZA(),t.TgZ(56,"p",37),t.YNc(57,Q,2,2,"span",38),t.YNc(58,D,2,2,"span",38),t.qZA(),t.TgZ(59,"p",37),t.YNc(60,b,2,2,"span",38),t.YNc(61,O,2,2,"span",38),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(e.util.general.name),t.xp6(2),t.lnq("",e.getDate(e.from)," ",e.util.translate("to")," ",e.getDate(e.to)," "),t.xp6(2),t.hij(" ",e.util.general.name,""),t.xp6(2),t.hij(" ",e.util.general.address," "),t.xp6(2),t.AsE(" ",e.util.general.city," ",e.util.general.state,""),t.xp6(2),t.AsE(" ",e.util.general.country," ",e.util.general.zip," "),t.xp6(2),t.hij(" ",e.util.general.email,""),t.xp6(2),t.hij(" ",e.util.general.mobile," "),t.xp6(2),t.hij(" ",e.storename," "),t.xp6(2),t.Oqu(e.today()),t.xp6(5),t.hij("",e.util.translate("Id")," "),t.xp6(2),t.hij("",e.util.translate("Orders on")," "),t.xp6(2),t.hij("",e.util.translate("Items")," "),t.xp6(2),t.hij("",e.util.translate("Total")," "),t.xp6(2),t.hij("",e.util.translate("Discount")," "),t.xp6(2),t.hij("",e.util.translate("Grand Total")," "),t.xp6(2),t.hij("",e.util.translate("Commission")," "),t.xp6(2),t.Q6J("ngForOf",e.orders),t.xp6(5),t.hij(" ",e.util.translate("Total")," "),t.xp6(2),t.hij(" ",e.util.translate("Commission")," "),t.xp6(2),t.hij(" ",e.util.translate("Amount Pay")," "),t.xp6(3),t.Q6J("ngIf","left"==e.util.cside),t.xp6(1),t.Q6J("ngIf","right"==e.util.cside),t.xp6(2),t.Q6J("ngIf","left"==e.util.cside),t.xp6(1),t.Q6J("ngIf","right"==e.util.cside),t.xp6(2),t.Q6J("ngIf","left"==e.util.cside),t.xp6(1),t.Q6J("ngIf","right"==e.util.cside)}}const H=[{path:"",component:(()=>{class n{constructor(e,o){this.util=e,this.api=o,this.freelancers=[],this.dummyFreelacer=[],this.freelancerUId="",this.from="",this.to="",this.orders=[],this.freelancerName="",this.freelancerCommistion=0,this.totalAmount=0,this.commisionAmount=0,this.toPay=0,this.getFreelancer()}ngOnInit(){}getFreelancer(){this.dummyFreelacer=Array(5),this.freelancers=[],this.api.get_private("v1/salon/getListForOffers").then(e=>{this.dummyFreelacer=[],console.log(e),e&&e.status&&200==e.status&&e.success&&(console.log(">>>>>",e),e.data.length>0&&(this.freelancers=e.data))},e=>{this.dummyFreelacer=[],console.log("Error",e),this.util.apiErrorHandler(e)}).catch(e=>{this.dummyFreelacer=[],console.log("Err",e),this.util.apiErrorHandler(e)})}getStats(){var e=this;if(console.log("from",this.from),console.log("to",this.to),console.log("storeid",this.freelancerUId),!(this.from&&this.to&&this.freelancerUId))return console.log("not valid"),this.util.error(this.util.translate("All Fields are required")),!1;{const o=this.freelancers.filter(s=>s.uid==this.freelancerUId);o&&o.length&&(this.freelancerName=o[0].name,console.log(this.freelancerName)),console.log("ok");const d={id:this.freelancerUId,from:u(this.from,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm"),to:u(this.to,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm")};console.log(d),this.util.show(),this.apiCalled=!1,this.orders=[],this.api.post_private("v1/stats/getOrderStats",d).then(s=>{if(this.apiCalled=!0,this.util.hide(),console.log(s),s&&200==s.status&&s.data.length){this.freelancerCommistion=parseFloat(s.commission.rate).toFixed(2),console.log("commustion",this.freelancerCommistion);let c=0;s.data.forEach(function(){var g=(0,A.Z)(function*(a){(l=>{try{return JSON.parse(l),!0}catch{return!1}})(a.orders)&&(a.orders=JSON.parse(a.orders),a.date_time=u(a.date_time).format("dddd, MMMM Do YYYY"),4==a.status&&a.orders.forEach(l=>{c+=l.discount>0?parseFloat(l.sell_price)*parseInt(l.quantity):parseFloat(l.original_price)*parseInt(l.quantity),console.log(c)}),e.orders.push(a))});return function(a){return g.apply(this,arguments)}}()),setTimeout(()=>{console.log(this.orders),console.log(c,this.freelancerCommistion);const a=function g(l,Z){return l/100*Z}(c,parseFloat(this.freelancerCommistion));console.log("commistion==>>>>>",a.toFixed(2)),this.commisionAmount=a.toFixed(2),this.totalAmount=c,this.toPay=this.commisionAmount},1e3)}},s=>{this.util.hide(),console.log(s),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))}).catch(s=>{this.util.hide(),console.log(s),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))})}}getCommisions(e){return(parseFloat(e)*this.freelancerCommistion/100).toFixed(2)}donwloadPDF(){}today(){return u().format("ll")}getDate(e){return u(e).format("ll")}getName(){return this.freelancerName+"_"+u(this.from).format("DDMMYYYY")+"_"+u(this.to).format("DDMMYYYY")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.f),t.Y36(v.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products-stats"]],decls:37,vars:15,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row"],[1,"col-sm-12"],[1,"form-group"],["name","select",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],["type","date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"btn","btn-danger","btn-round",3,"click"],["style","margin-left: 20px;","printSectionId","print-section","ngxPrint","","class","btn btn-primary",3,"useExistingCss","printTitle",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","row","id","print-section",4,"ngIf"],[3,"value"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-primary",2,"margin-left","20px",3,"useExistingCss","printTitle"],[1,"icofont","icofont-printer"],[2,"text-align","center"],["id","print-section",1,"row"],[1,"card-body",2,"padding","20px"],[2,"text-align","center","color","#7ec6aa"],[2,"text-align","center","color","#ED7669"],[2,"text-align","right","font-weight","bold","margin","0px !important","color","#7EC6AA"],[2,"text-align","right","font-weight","bold","margin","0px !important"],[2,"text-align","left","font-weight","bold","margin","0px","color","#aaafad"],[2,"text-align","left","font-weight","bold","color","#7EC6AA"],[1,"table","table-striped"],[1,"text-uppercase",2,"color","#7ec6aa"],["style","background-color: #F5F8FA;",4,"ngFor","ngForOf"],[1,"row",2,"padding","20px"],[1,"col-sm-4"],[1,"col-sm-2"],[2,"color","black !important","margin","0px !important","text-align","right"],[4,"ngIf"],[2,"background-color","#F5F8FA"],[4,"ngFor","ngForOf"],[2,"font-size","12px","text-transform","capitalize"]],template:function(e,o){1&e&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"div",2)(9,"div",3)(10,"div",4)(11,"div",6)(12,"h5"),t._uU(13),t.qZA()(),t.TgZ(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"label"),t._uU(19),t.qZA(),t.TgZ(20,"select",11),t.NdJ("ngModelChange",function(s){return o.freelancerUId=s}),t.YNc(21,C,2,2,"option",12),t.qZA()()(),t.TgZ(22,"div",13)(23,"label"),t._uU(24),t.qZA(),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.from=s}),t.qZA()(),t.TgZ(26,"div",13)(27,"label"),t._uU(28),t.qZA(),t.TgZ(29,"input",14),t.NdJ("ngModelChange",function(s){return o.to=s}),t.qZA()()(),t.TgZ(30,"div",8)(31,"div",9)(32,"button",15),t.NdJ("click",function(){return o.getStats()}),t._uU(33),t.qZA(),t.YNc(34,U,3,3,"button",16),t.qZA()()()()()(),t.YNc(35,q,2,1,"h2",17),t.YNc(36,$,62,31,"div",18),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",o.util.translate("Stats")," "),t.xp6(7),t.hij("",o.util.translate("Get Stats")," "),t.xp6(6),t.Oqu(o.util.translate("Select Freelancer")),t.xp6(1),t.Q6J("ngModel",o.freelancerUId),t.xp6(1),t.Q6J("ngForOf",o.freelancers),t.xp6(3),t.hij("",o.util.translate("From Date")," "),t.xp6(1),t.Q6J("ngModel",o.from)("placeholder",o.util.translate("Expire Date")),t.xp6(3),t.hij("",o.util.translate("To Date")," "),t.xp6(1),t.Q6J("ngModel",o.to)("placeholder",o.util.translate("Expire Date")),t.xp6(4),t.hij("",o.util.translate("Get Stats")," "),t.xp6(1),t.Q6J("ngIf",o.from&&o.to&&(null==o.orders?null:o.orders.length)),t.xp6(1),t.Q6J("ngIf",o.from&&o.to&&!(null!=o.orders&&o.orders.length)&&o.apiCalled),t.xp6(1),t.Q6J("ngIf",o.from&&o.to&&(null==o.orders?null:o.orders.length)))},dependencies:[m.sg,m.O5,h.I,x.Ro,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On],styles:['@charset "UTF-8";']}),n})()}];let z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(H),f.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,z,h.K,x.ef,p.u5]}),n})()}}]);