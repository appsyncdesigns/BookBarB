"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[650],{8692:(H,d,s)=>{s.r(d),s.d(d,{SalonStatsModule:()=>$});var m=s(6895),f=s(9455),Z=s(5861),c=s(5439),t=s(4650),S=s(7241),A=s(5830),_=s(6186),h=s(8423),u=s(4006);function v(e,o){if(1&e&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.uid),t.xp6(1),t.hij(" ",n.name," ")}}function T(e,o){if(1&e&&(t.TgZ(0,"button",24),t._UZ(1,"i",25),t._uU(2),t.qZA()),2&e){const n=t.oxw();t.Q6J("useExistingCss",!0)("printTitle",n.storename),t.xp6(2),t.hij("",n.util.translate("Print")," ")}}function U(e,o){if(1&e&&(t.TgZ(0,"h2",26),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.util.translate("No Appointments Found")," ")}}function C(e,o){if(1&e&&(t.TgZ(0,"p",45)(1,"span",46),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.hij(" ",n.name," ")}}function Y(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,C,3,1,"p",44),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n.items.services)}}function q(e,o){if(1&e&&(t.TgZ(0,"p",45)(1,"span",46),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.hij(" ",n.name," ")}}function y(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,q,3,1,"p",44),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n.items.packages)}}function F(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.util.currecny," ",n.total," ")}}function M(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",n.total," ",i.util.currecny,"")}}function J(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.util.currecny," ",n.discount," ")}}function I(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",n.discount," ",i.util.currecny,"")}}function N(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.util.currecny," ",n.grand_total," ")}}function w(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",n.grand_total," ",i.util.currecny,"")}}function j(e,o){if(1&e&&(t.TgZ(0,"tr",43)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,Y,2,1,"div",42),t.qZA(),t.TgZ(7,"td"),t.YNc(8,y,2,1,"div",42),t.qZA(),t.TgZ(9,"td"),t.YNc(10,F,2,2,"span",42),t.YNc(11,M,2,2,"span",42),t.qZA(),t.TgZ(12,"td"),t.YNc(13,J,2,2,"span",42),t.YNc(14,I,2,2,"span",42),t.qZA(),t.TgZ(15,"td"),t.YNc(16,N,2,2,"span",42),t.YNc(17,w,2,2,"span",42),t.qZA(),t._UZ(18,"td"),t.qZA()),2&e){const n=o.$implicit,i=t.oxw(2);t.xp6(2),t.hij("##",n.id,""),t.xp6(2),t.Oqu(n.save_date),t.xp6(2),t.Q6J("ngIf",n&&n.items&&n.items.services&&n.items.services.length>0),t.xp6(2),t.Q6J("ngIf",n&&n.items&&n.items.packages&&n.items.packages.length>0),t.xp6(2),t.Q6J("ngIf","left"==i.util.cside),t.xp6(1),t.Q6J("ngIf","right"==i.util.cside),t.xp6(2),t.Q6J("ngIf","left"==i.util.cside),t.xp6(1),t.Q6J("ngIf","right"==i.util.cside),t.xp6(2),t.Q6J("ngIf","left"==i.util.cside),t.xp6(1),t.Q6J("ngIf","right"==i.util.cside)}}function E(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE("",n.util.currecny," ",n.totalAmount," ")}}function b(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE("",n.totalAmount," ",n.util.currecny,"")}}function D(e,o){if(1&e&&(t.TgZ(0,"div",27)(1,"div",3)(2,"div",4)(3,"div",28)(4,"h3",29),t._uU(5),t.qZA(),t.TgZ(6,"p",30),t._uU(7),t.qZA(),t.TgZ(8,"p",31),t._uU(9),t.qZA(),t.TgZ(10,"p",32),t._uU(11),t._UZ(12,"br"),t._uU(13),t._UZ(14,"br"),t._uU(15),t.qZA(),t.TgZ(16,"p",32),t._uU(17),t.qZA(),t.TgZ(18,"p",32),t._uU(19),t.qZA(),t.TgZ(20,"p",33),t._uU(21),t.qZA(),t.TgZ(22,"p",34),t._uU(23),t.qZA(),t.TgZ(24,"table",35)(25,"thead")(26,"tr",36)(27,"th"),t._uU(28),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.qZA(),t.TgZ(37,"th"),t._uU(38),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,j,19,10,"tr",37),t.qZA()(),t.TgZ(43,"div",38),t._UZ(44,"div",14),t.TgZ(45,"div",39)(46,"p",31),t._uU(47),t.qZA()(),t.TgZ(48,"div",40)(49,"p",41),t.YNc(50,E,2,2,"span",42),t.YNc(51,b,2,2,"span",42),t.qZA()()()()()()()),2&e){const n=t.oxw();t.xp6(5),t.Oqu(n.util.general.name),t.xp6(2),t.lnq("",n.getDate(n.from)," ",n.util.translate("to")," ",n.getDate(n.to)," "),t.xp6(2),t.hij(" ",n.util.general.name,""),t.xp6(2),t.hij(" ",n.util.general.address," "),t.xp6(2),t.AsE(" ",n.util.general.city," ",n.util.general.state,""),t.xp6(2),t.AsE(" ",n.util.general.country," ",n.util.general.zip," "),t.xp6(2),t.hij(" ",n.util.general.email,""),t.xp6(2),t.hij(" ",n.util.general.mobile," "),t.xp6(2),t.hij(" ",n.storename," "),t.xp6(2),t.Oqu(n.today()),t.xp6(5),t.hij("",n.util.translate("Id")," "),t.xp6(2),t.hij("",n.util.translate("Appointments on")," "),t.xp6(2),t.hij("",n.util.translate("Services")," "),t.xp6(2),t.hij("",n.util.translate("Packages")," "),t.xp6(2),t.hij("",n.util.translate("Total")," "),t.xp6(2),t.hij("",n.util.translate("Discount")," "),t.xp6(2),t.hij("",n.util.translate("Grand Total")," "),t.xp6(2),t.Q6J("ngForOf",n.appointments),t.xp6(5),t.hij(" ",n.util.translate("Total")," "),t.xp6(3),t.Q6J("ngIf","left"==n.util.cside),t.xp6(1),t.Q6J("ngIf","right"==n.util.cside)}}const Q=[{path:"",component:(()=>{class e{constructor(n,i){this.util=n,this.api=i,this.freelancers=[],this.dummyFreelacer=[],this.freelancerUId="",this.from="",this.to="",this.appointments=[],this.freelancerName="",this.freelancerCommistion=0,this.totalAmount=0,this.commisionAmount=0,this.toPay=0,this.getFreelancer()}ngOnInit(){}getFreelancer(){this.dummyFreelacer=Array(5),this.freelancers=[],this.api.get_private("v1/salon/getAll").then(n=>{this.dummyFreelacer=[],console.log(n),n&&n.status&&200==n.status&&n.success&&(console.log(">>>>>",n),n.data.length>0&&(this.freelancers=n.data))},n=>{this.dummyFreelacer=[],console.log("Error",n),this.util.apiErrorHandler(n)}).catch(n=>{this.dummyFreelacer=[],console.log("Err",n),this.util.apiErrorHandler(n)})}getStats(){var n=this;if(console.log("from",this.from),console.log("to",this.to),console.log("storeid",this.freelancerUId),!(this.from&&this.to&&this.freelancerUId))return console.log("not valid"),this.util.error(this.util.translate("All Fields are required")),!1;{const i=this.freelancers.filter(l=>l.uid==this.freelancerUId);i&&i.length&&(this.freelancerName=i[0].name,console.log(this.freelancerName)),console.log("ok");const g={id:this.freelancerUId,from:c(this.from,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm"),to:c(this.to,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm")};console.log(g),this.util.show(),this.apiCalled=!1,this.appointments=[],this.api.post_private("v1/salon/getAppointmentsSalonStats",g).then(l=>{if(this.apiCalled=!0,this.util.hide(),console.log(l),l&&200==l.status&&l.data.length){let p=0;l.data.forEach(function(){var x=(0,Z.Z)(function*(a){(r=>{try{return JSON.parse(r),!0}catch{return!1}})(a.items)&&(a.items=JSON.parse(a.items),a.save_date=c(a.save_date).format("dddd, MMMM Do YYYY"),4==a.status&&(a&&a.items&&a.items.services&&a.items.services.length>0&&a.items.services.forEach(r=>{p+=r.off>0?parseFloat(r.off):parseFloat(r.price)}),a&&a.items&&a.items.packages&&a.items.packages.length>0&&a.items.packages.forEach(r=>{p+=r.off>0?parseFloat(r.off):parseFloat(r.price)})),n.appointments.push(a))});return function(a){return x.apply(this,arguments)}}()),setTimeout(()=>{console.log(this.appointments),console.log(p,this.freelancerCommistion),this.totalAmount=p},1e3)}},l=>{this.util.hide(),console.log(l),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))}).catch(l=>{this.util.hide(),console.log(l),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))})}}getCommisions(n){return(parseFloat(n)*this.freelancerCommistion/100).toFixed(2)}donwloadPDF(){}today(){return c().format("ll")}getDate(n){return c(n).format("ll")}getName(){return this.freelancerName+"_"+c(this.from).format("DDMMYYYY")+"_"+c(this.to).format("DDMMYYYY")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(S.f),t.Y36(A.s))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-salon-stats"]],decls:37,vars:15,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row"],[1,"col-sm-12"],[1,"form-group"],["for","salon-id",1,"form-control-label"],["name","select","id","salon-id",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6"],["for","from-date",1,"form-control-label"],["type","date","id","from-date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["for","to-date",1,"form-control-label"],["type","date","id","to-date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"btn","btn-danger","btn-round",3,"click"],["style","margin-left: 20px;","printSectionId","print-section","ngxPrint","","class","btn btn-primary",3,"useExistingCss","printTitle",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","row","id","print-section",4,"ngIf"],[3,"value"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-primary",2,"margin-left","20px",3,"useExistingCss","printTitle"],[1,"icofont","icofont-printer"],[2,"text-align","center"],["id","print-section",1,"row"],[1,"card-body",2,"padding","20px"],[2,"text-align","center","color","#7ec6aa"],[2,"text-align","center","color","#ED7669"],[2,"text-align","right","font-weight","bold","margin","0px !important","color","#7EC6AA"],[2,"text-align","right","font-weight","bold","margin","0px !important"],[2,"text-align","left","font-weight","bold","margin","0px","color","#aaafad"],[2,"text-align","left","font-weight","bold","color","#7EC6AA"],[1,"table","table-striped"],[1,"text-uppercase",2,"color","#7ec6aa"],["style","background-color: #F5F8FA;",4,"ngFor","ngForOf"],[1,"row",2,"padding","20px"],[1,"col-sm-4"],[1,"col-sm-2"],[2,"color","black !important","margin","0px !important","text-align","right"],[4,"ngIf"],[2,"background-color","#F5F8FA"],["style","margin:0px;",4,"ngFor","ngForOf"],[2,"margin","0px"],[2,"font-size","10px","text-transform","capitalize"]],template:function(n,i){1&n&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"div",2)(9,"div",3)(10,"div",4)(11,"div",6)(12,"h5"),t._uU(13),t.qZA()(),t.TgZ(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"label",11),t._uU(19),t.qZA(),t.TgZ(20,"select",12),t.NdJ("ngModelChange",function(l){return i.freelancerUId=l}),t.YNc(21,v,2,2,"option",13),t.qZA()()(),t.TgZ(22,"div",14)(23,"label",15),t._uU(24),t.qZA(),t.TgZ(25,"input",16),t.NdJ("ngModelChange",function(l){return i.from=l}),t.qZA()(),t.TgZ(26,"div",14)(27,"label",17),t._uU(28),t.qZA(),t.TgZ(29,"input",18),t.NdJ("ngModelChange",function(l){return i.to=l}),t.qZA()()(),t.TgZ(30,"div",8)(31,"div",9)(32,"button",19),t.NdJ("click",function(){return i.getStats()}),t._uU(33),t.qZA(),t.YNc(34,T,3,3,"button",20),t.qZA()()()()()(),t.YNc(35,U,2,1,"h2",21),t.YNc(36,D,52,25,"div",22),t.qZA()()()()()),2&n&&(t.xp6(6),t.hij(" ",i.util.translate("Stats")," "),t.xp6(7),t.hij("",i.util.translate("Get Stats")," "),t.xp6(6),t.Oqu(i.util.translate("Select Salon")),t.xp6(1),t.Q6J("ngModel",i.freelancerUId),t.xp6(1),t.Q6J("ngForOf",i.freelancers),t.xp6(3),t.hij("",i.util.translate("From Date")," "),t.xp6(1),t.Q6J("ngModel",i.from)("placeholder",i.util.translate("Expire Date")),t.xp6(3),t.hij("",i.util.translate("To Date")," "),t.xp6(1),t.Q6J("ngModel",i.to)("placeholder",i.util.translate("Expire Date")),t.xp6(4),t.hij("",i.util.translate("Get Stats")," "),t.xp6(1),t.Q6J("ngIf",i.from&&i.to&&(null==i.appointments?null:i.appointments.length)),t.xp6(1),t.Q6J("ngIf",i.from&&i.to&&!(null!=i.appointments&&i.appointments.length)&&i.apiCalled),t.xp6(1),t.Q6J("ngIf",i.from&&i.to&&(null==i.appointments?null:i.appointments.length)))},dependencies:[m.sg,m.O5,_.I,h.Ro,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.On],styles:['@charset "UTF-8";']}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(Q),f.Bz]}),e})(),$=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,O,_.K,h.ef,u.u5]}),e})()}}]);